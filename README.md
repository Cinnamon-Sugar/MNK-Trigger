# MNK Trigger! by Cinnamon Sugar
西内萌的6.0芒克触发器！
## 它可以做什么
- 告诉你下一个GCD打什么技能
## 它不可以做什么
- 告诉你oGCD技能怎么打，什么时候打
- 帮你摁键盘
- 帮你logs99
## 适用人群
- 想试试6.0新武僧但是又不想背循环的佛系玩家
## 如何使用
待施工
## 工作原理与局限
基于当前自身所处身形，buff/dot剩余时间，是否处于震脚状态，以及目前阴阳查克拉状态来判断下一GCD的最优选择。
### 军体拳
> 当我们处于魔猿（1），盗龙（2），或猛豹（3）身形下时，每个GCD都是在二选一，因此我们根据是否需要补连击/buff/dot来决定打哪一个技能。

在正常情况下，本触发器提示的技能顺序与大家熟知的军体拳一致，判断标准为:
1. 角色无连击buff时打双龙脚，反之打连击
2. Buff持续时间小于x秒时打双掌打，反之打正拳 (x默认为5，可自定义)
3. Dot持续时间小于y秒时打破碎拳，反之打崩拳 (y默认为5，可自定义)
### 震脚，红莲与必杀技
> 在6.0的武僧技改后，震脚，红莲与必杀技三者息息相关。简单来说，只有在开启震脚时能打必杀技，而必杀技是我们威力最高的技能，所以我们希望每一次必杀技都打进红莲里。而震脚40sCD，红莲60sCD，我们发现每奇数次的红莲内可以打2个必杀技，我们称为大红莲，而偶数次只能打出1个必杀技，我们称为小红莲。
> 我们又发现：
> - 1形下的技能平均威力最高
> - 阴必杀威力 < 阳必杀威力 < 真必杀威力
> - 我们每2次红莲都会使用3次必杀技
> 因此我们每2次红莲内使用必杀技的最优解为：
> **在不断buff/dot的情况下**打一阴一阳，真必杀使用1形技能触发（从技能释放的角度看等同于阴必杀）

#### 阴阳必杀技判断的优先级
本触发器会根据释放震脚时当前角色状态判断要使用阴必杀还是阳必杀，判断优先级由高到低为：
1. 不浪费阴阳查克拉
2. 不断buff/dot
3. 优先使用阴必杀

需要注意的是实战中可能会出现使用阳必杀的三个GCD触发真必杀的情况，这是因为在本触发器中不断buff和dot的优先级是大于优先使用阴必杀的，而根据计算，使用1-1-1打真必杀的收益是大于断一跳dot的损失的。总的来说，本触发器的优先级逻辑是在求稳的大前提下尽可能打出高威力，希望对完美循环比较在意的玩家谨慎使用。
同时，本触发器也提供了~~部分~~解决此问题的办法，即下文提到的Buff/Dot监视器。

#### Buff/Dot监视器
> 由于在正常技速下，我们可以在红莲内打出11个GCD，而每次使用必杀技需要占用4个GCD，因此在小红莲中，我们几乎总是可以通过调整释放必杀技的时间而保证放出阴必杀。在大红莲中，我们要占用8个GCD来打出两个必杀技，此时如果想要打出阴必杀且保持buff/dot则需要一个可靠的监视器。

本触发器中提供了一个buff/dot监视器，buff/dot的剩余时间越长，提示字越清晰，反之则越透明。如果其中任何一个（buff或dot）的持续时间小于给定阈值（即上文x，y），则提示字消失，此时打出震脚则会判断需要进入阳必杀续buff/dot。相反的，如果提示字处于可见状态，则此时开启震脚会优先进入阴必杀。此监视器可以更好地帮助规划震脚和红莲的使用。

#### 大小红莲显示与调整
在木桩循环下，大小红莲会在每分钟交替。而在实战中，因为各种各样的原因会导致红莲的错位，如在奇数次红莲只打了一次必杀技。考虑到这种情况，本触发器提供了下一次红莲大/小显示，并会在每次红莲持续结束时更新。如果出现错位的情况，可以使用命令`/e !Reset RoF`进行调整。

### 无相身形
由于必杀技命中后会给予我们无相身形，因此我们需要确定释放必杀技后的下一GCD的最优解。
本触发器会根据释放必杀技后buff/dot状态判断进入1形，2形，还是3形，判断优先级由高到低为：
1. 不断buff
2. 不断dot
3. 打1形

同时，起手爆发以及转场时我们也默认会进入无相身形，判断标准为buff和dot均已过期z秒(z默认为8，可自定义)，此时会优先打1形。

### 局限性
目前已知有以下问题：
1. 由于破碎拳dot生效时间与技能释放时间之间有延迟，会导致在使用破碎拳的这个GCD内开启震脚时阴阳必杀判断出错。建议使用上文提到的Buff/Dot监视器来判断。
2. 由于必杀技未命中目标时不会给予玩家无相身形，会导致这一GCD触发器不提示。建议，额，别空大。
3. 在打阳必杀时不会调整身形顺序，也不会重新选择起始身形。即如果开启震脚前的GCD我们打了1，那么接下来这三个GCD依旧会按照2-3-1的顺序触发阳必杀，而不会选择1-3-2，即使后者的威力更高。~~大概吧,主要是为了这点威力多写很多判断实在太麻烦了(｀・ω・´)~~
4. 本触发器未考虑双阳起手。~~也是因为太麻烦了~~
5. 本触发器未考虑AoE循环。

## FAQ
想到再说

## 鸣谢
感谢鹿岛和PDF当我的小白鼠！
